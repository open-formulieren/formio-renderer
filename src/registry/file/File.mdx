import {Meta} from '@storybook/addon-docs/blocks';

import * as FileStories from './index.stories';

<Meta of={FileStories} name="Docs" />

# `file` component

The Formio `file` component provides a way for users to upload attachments that are submitted along
with the form.

## Interaction flow

1. The user selects one or multiple files to upload, either by point-and-click or drag and drop from
   their device to the dropzone.
2. Client side valiation checks the file requirements, such as file type, file size and amount of
   files being uploaded.
3. Any file that is not valid is displayed with errors, files that are valid are upload to the
   backend in a temporary file storage (out of scope for the renderer).
4. The temporary file metadata (such as the API resource URL) is submitted as part of the form data,
   so that the backend can resolve it and make the temporary file upload permanent.

## Supported features

Formio's file upload component has a big feature set, we only support a small subset:

- Single vs multiple file uploads (`multiple` property).
- Optionally specifying a maximum number of files (`maxNumberOfFiles` property).
- Setting a file size limit for an individual file (`fileMaxSize` property).
- Specifying which file types are allowed (based on MIME type, `file.type` property).

## Accessibility

We want to provide good support for assistive technology (AT) such as screenreaders.

Notable accessibility features used are:

- The upload element has a description that informs the user about the upload constraints like
  number of files and maximum file size.
- Proper label for the list with uploaded files.
- There's an `aria-live` region that announces when a file has been dragged into the drop zone and
  can be dropped.
- Field validation errors are part of the accessible description.
- The button to remove an upload refers to the filename affected in its label.

However, we still need to validate that all of this works as intended.
